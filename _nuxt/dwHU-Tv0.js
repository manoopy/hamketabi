import{a6 as I,l as k,S as O,q as S,a7 as _,w as R,E as x,a8 as L,a9 as C}from"./DgGCtTaB.js";import{i as N}from"./y1qtJ0Us.js";function P(e,i){if(typeof e!="string")throw new TypeError("argument str must be a string");const t={},o=i||{},s=o.decode||M;let a=0;for(;a<e.length;){const n=e.indexOf("=",a);if(n===-1)break;let r=e.indexOf(";",a);if(r===-1)r=e.length;else if(r<n){a=e.lastIndexOf(";",n-1)+1;continue}const f=e.slice(a,n).trim();if(o!=null&&o.filter&&!(o!=null&&o.filter(f))){a=r+1;continue}if(t[f]===void 0){let c=e.slice(n+1,r).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),t[f]=U(c,s)}a=r+1}return t}function M(e){return e.includes("%")?decodeURIComponent(e):e}function U(e,i){try{return i(e)}catch{return e}}const g=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function T(e,i,t){const o=t||{},s=o.encode||encodeURIComponent;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!g.test(e))throw new TypeError("argument name is invalid");const a=s(i);if(a&&!g.test(a))throw new TypeError("argument val is invalid");let n=e+"="+a;if(o.maxAge!==void 0&&o.maxAge!==null){const r=o.maxAge-0;if(Number.isNaN(r)||!Number.isFinite(r))throw new TypeError("option maxAge is invalid");n+="; Max-Age="+Math.floor(r)}if(o.domain){if(!g.test(o.domain))throw new TypeError("option domain is invalid");n+="; Domain="+o.domain}if(o.path){if(!g.test(o.path))throw new TypeError("option path is invalid");n+="; Path="+o.path}if(o.expires){if(!q(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");n+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(n+="; HttpOnly"),o.secure&&(n+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":{n+="; Priority=Low";break}case"medium":{n+="; Priority=Medium";break}case"high":{n+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:{n+="; SameSite=Strict";break}case"lax":{n+="; SameSite=Lax";break}case"strict":{n+="; SameSite=Strict";break}case"none":{n+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return o.partitioned&&(n+="; Partitioned"),n}function q(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function u(e){if(typeof e!="object")return e;var i,t,o=Object.prototype.toString.call(e);if(o==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){t=new e.constructor;for(i in e)e.hasOwnProperty(i)&&t[i]!==e[i]&&(t[i]=u(e[i]))}else{t={};for(i in e)i==="__proto__"?Object.defineProperty(t,i,{value:u(e[i]),configurable:!0,enumerable:!0,writable:!0}):t[i]=u(e[i])}return t}if(o==="[object Array]"){for(i=e.length,t=Array(i);i--;)t[i]=u(e[i]);return t}return o==="[object Set]"?(t=new Set,e.forEach(function(s){t.add(u(s))}),t):o==="[object Map]"?(t=new Map,e.forEach(function(s,a){t.set(u(a),u(s))}),t):o==="[object Date]"?new Date(+e):o==="[object RegExp]"?(t=new RegExp(e.source,e.flags),t.lastIndex=e.lastIndex,t):o==="[object DataView]"?new e.constructor(u(e.buffer)):o==="[object ArrayBuffer]"?e.slice(0):o.slice(-6)==="Array]"?new e.constructor(e):e}const B={path:"/",watch:!0,decode:e=>I(decodeURIComponent(e)),encode:e=>encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},y=window.cookieStore;function b(e,i){var f;const t={...B,...i};t.filter??(t.filter=c=>c===e);const o=A(t)||{};let s;t.maxAge!==void 0?s=t.maxAge*1e3:t.expires&&(s=t.expires.getTime()-Date.now());const a=s!==void 0&&s<=0,n=u(a?void 0:o[e]??((f=t.default)==null?void 0:f.call(t))),r=s&&!a?V(n,s,t.watch&&t.watch!=="shallow"):k(n);{let c=null;try{!y&&typeof BroadcastChannel<"u"&&(c=new BroadcastChannel(`nuxt:cookies:${e}`))}catch{}const l=()=>{t.readonly||N(r.value,o[e])||(H(e,r.value,t),o[e]=u(r.value),c==null||c.postMessage({value:t.encode(r.value)}))},p=d=>{var m;const h=d.refresh?(m=A(t))==null?void 0:m[e]:t.decode(d.value);w=!0,r.value=h,o[e]=u(h),x(()=>{w=!1})};let w=!1;const E=!!O();if(E&&S(()=>{w=!0,l(),c==null||c.close()}),y){const d=h=>{const m=h.changed.find(v=>v.name===e),D=h.deleted.find(v=>v.name===e);m&&p({value:m.value}),D&&p({value:null})};y.addEventListener("change",d),E&&S(()=>y.removeEventListener("change",d))}else c&&(c.onmessage=({data:d})=>p(d));t.watch?R(r,()=>{w||l()},{deep:t.watch!=="shallow"}):l()}return r}function A(e={}){return P(document.cookie,e)}function F(e,i,t={}){return i==null?T(e,i,{...t,maxAge:-1}):T(e,i,t)}function H(e,i,t={}){document.cookie=F(e,i,t)}const j=2147483647;function V(e,i,t){let o,s,a=0;const n=t?k(e):{value:e};return O()&&S(()=>{s==null||s(),clearTimeout(o)}),_((r,f)=>{t&&(s=R(n,f));function c(){a=0,clearTimeout(o);const l=i-a,p=l<j?l:j;o=setTimeout(()=>{if(a+=p,a<i)return c();n.value=void 0,f()},p)}return{get(){return r(),n.value},set(l){c(),n.value=l,f()}}})}const J=L("auth",{state:()=>({status:k(b("login_status")||!1)}),getters:{isLoggedIn:e=>e.status},actions:{authenticate(){const e=b("login_status");e.value=!0,C().push("/")},logout(){const e=b("login_status");e.value=null,C().push("/")}}});export{J as u};

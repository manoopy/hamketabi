import{_ as q,u as G,i as p,b as _}from"./B-0IRHAp.js";import{u as P,S as x,q as ee,z as B,l as w,i as d,o as j,c as F,K as ae,m as le,d as N,n as C,L as $,b as W,e as ne,h as A,f as ie,g as S,P as te,B as ue,j as oe,k as z,R as de}from"./DgGCtTaB.js";import{_ as se}from"./DlAUqK2U.js";function ze(e){return x()?(ee(e),!0):!1}function D(e){return typeof e=="function"?e():P(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const M=()=>{};function re(e,n){function u(...a){return new Promise((l,s)=>{Promise.resolve(e(()=>n.apply(this,a),{fn:n,thisArg:this,args:a})).then(l).catch(s)})}return u}function ce(e,n={}){let u,a,l=M;const s=t=>{clearTimeout(t),l(),l=M};return t=>{const y=D(e),g=D(n.maxWait);return u&&s(u),y<=0||g!==void 0&&g<=0?(a&&(s(a),a=null),Promise.resolve(t())):new Promise((o,r)=>{l=n.rejectOnCancel?r:o,g&&!a&&(a=setTimeout(()=>{u&&s(u),a=null,o(t())},g)),u=setTimeout(()=>{a&&s(a),a=null,o(t())},y)})}}function fe(e,n=200,u={}){return re(ce(n,u),e)}const ge=(e,n,u=!0)=>{const a=B("form-events",void 0),l=B("form-group",void 0),s=B("form-inputs",void 0);l&&(!u||e!=null&&e.legend?l.inputId.value=void 0:e!=null&&e.id&&(l.inputId.value=e==null?void 0:e.id),s&&(s.value[l.name.value]=l.inputId.value));const f=w(!1);function t(r,I){a&&a.emit({type:r,path:I})}function y(){t("blur",l==null?void 0:l.name.value),f.value=!0}function g(){t("change",l==null?void 0:l.name.value)}const o=fe(()=>{(f.value||l!=null&&l.eagerValidation.value)&&t("input",l==null?void 0:l.name.value)},300);return{inputId:d(()=>(e==null?void 0:e.id)??(l==null?void 0:l.inputId.value)),name:d(()=>(e==null?void 0:e.name)??(l==null?void 0:l.name.value)),size:d(()=>{var I;const r=n.size[l==null?void 0:l.size.value]?l==null?void 0:l.size.value:null;return(e==null?void 0:e.size)??r??((I=n.default)==null?void 0:I.size)}),color:d(()=>{var r;return(r=l==null?void 0:l.error)!=null&&r.value?"red":e==null?void 0:e.color}),emitFormBlur:y,emitFormInput:o,emitFormChange:g}},c=ie(S.ui.strategy,S.ui.input,p),ve=ne({components:{UIcon:q},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>c.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(c.size).includes(e)}},color:{type:String,default:()=>c.default.color,validator(e){return[...S.ui.colors,...Object.keys(c.color)].includes(e)}},variant:{type:String,default:()=>c.default.variant,validator(e){return[...Object.keys(c.variant),...Object.values(c.color).flatMap(n=>Object.keys(n))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:n,slots:u}){const{ui:a,attrs:l}=G("input",A(e,"ui"),c,A(e,"class")),{size:s,rounded:f}=_({ui:a,props:e}),{emitFormBlur:t,emitFormInput:y,size:g,color:o,inputId:r,name:I}=ge(e,c),v=d(()=>s.value??g.value),b=w(te({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),O=w(null),L=()=>{var i;e.autofocus&&((i=O.value)==null||i.focus())},T=i=>{b.value.trim&&(i=i.trim()),(b.value.number||e.type==="number")&&(i=de(i)),b.value.nullify&&(i||(i=null)),n("update:modelValue",i),y()},R=i=>{b.value.lazy||T(i.target.value)},U=i=>{if(e.type==="file"){const m=i.target.files;n("change",m)}else{const m=i.target.value;n("change",m),b.value.lazy&&T(m),b.value.trim&&(i.target.value=m.trim())}},E=i=>{t(),n("blur",i)};ue(()=>{setTimeout(()=>{L()},e.autofocusDelay)});const J=d(()=>{var m,V;const i=((V=(m=a.value.color)==null?void 0:m[o.value])==null?void 0:V[e.variant])||a.value.variant[e.variant];return oe(z(a.value.base,a.value.form,f.value,a.value.placeholder,e.type==="file"&&a.value.file.base,a.value.size[v.value],e.padded?a.value.padding[v.value]:"p-0",i==null?void 0:i.replaceAll("{color}",o.value),(h.value||u.leading)&&a.value.leading.padding[v.value],(k.value||u.trailing)&&a.value.trailing.padding[v.value]),e.inputClass)}),h=d(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),k=d(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),K=d(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),H=d(()=>e.loading&&!h.value?e.loadingIcon:e.trailingIcon||e.icon),Q=d(()=>z(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[v.value])),X=d(()=>z(a.value.icon.base,o.value&&S.ui.colors.includes(o.value)&&a.value.icon.color.replaceAll("{color}",o.value),a.value.icon.size[v.value],e.loading&&a.value.icon.loading)),Y=d(()=>z(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[v.value])),Z=d(()=>z(a.value.icon.base,o.value&&S.ui.colors.includes(o.value)&&a.value.icon.color.replaceAll("{color}",o.value),a.value.icon.size[v.value],e.loading&&!h.value&&a.value.icon.loading));return{ui:a,attrs:l,name:I,inputId:r,input:O,isLeading:h,isTrailing:k,inputClass:J,leadingIconName:K,leadingIconClass:X,leadingWrapperIconClass:Q,trailingIconName:H,trailingIconClass:Z,trailingWrapperIconClass:Y,onInput:R,onChange:U,onBlur:E}}}),me=["id","name","type","required","placeholder","disabled"];function ye(e,n,u,a,l,s){const f=q;return j(),F("div",{class:C(e.type==="hidden"?"hidden":e.ui.wrapper)},[ae("input",le({id:e.inputId,ref:"input",name:e.name,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass},e.type==="file"?e.attrs:{...e.attrs,value:e.modelValue},{onInput:n[0]||(n[0]=(...t)=>e.onInput&&e.onInput(...t)),onBlur:n[1]||(n[1]=(...t)=>e.onBlur&&e.onBlur(...t)),onChange:n[2]||(n[2]=(...t)=>e.onChange&&e.onChange(...t))}),null,16,me),N(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(j(),F("span",{key:0,class:C(e.leadingWrapperIconClass)},[N(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[$(f,{name:e.leadingIconName,class:C(e.leadingIconClass)},null,8,["name","class"])])],2)):W("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(j(),F("span",{key:1,class:C(e.trailingWrapperIconClass)},[N(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[$(f,{name:e.trailingIconName,class:C(e.trailingIconClass)},null,8,["name","class"])])],2)):W("",!0)],2)}const he=se(ve,[["render",ye]]);export{he as _,fe as a,ze as b,Se as i,M as n,D as t,ge as u};
